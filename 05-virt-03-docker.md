
# Домашнее задание к занятию 3. «Введение. Экосистема. Архитектура. Жизненный цикл Docker-контейнера»

## Как сдавать задания

Обязательны к выполнению задачи без звёздочки. Их нужно выполнить, чтобы получить зачёт и диплом о профессиональной переподготовке.

Задачи со звёздочкой (*) — дополнительные задачи и/или задачи повышенной сложности. Их выполнять не обязательно, но они помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в GitHub-репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---


## Важно

Перед отправкой работы на проверку удаляйте неиспользуемые ресурсы.
Это нужно, чтобы не расходовать средства, полученные в результате использования промокода.

Подробные рекомендации [здесь](https://github.com/netology-code/virt-homeworks/blob/virt-11/r/README.md).

---

## Задача 1

Сценарий выполнения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберите любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```

Опубликуйте созданный fork в своём репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

## Решение
Ссылка на мой репозиторий https://hub.docker.com/r/vanchester/netology-nginx/tags 


## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
«Подходит ли в этом сценарии использование Docker-контейнеров или лучше подойдёт виртуальная машина, физическая машина? Может быть, возможны разные варианты?»

Детально опишите и обоснуйте свой выбор.

--
## Решение

Сценарий:

- высоконагруженное монолитное Java веб-приложение;

Я думаю лучше использовать для этих целей виртуальную машину, тк потребуются большие ресурсы для использования и много зависимостей
- Nodejs веб-приложение;

Веб-приложения Node.js как раз чаще всего разворачивают в Docker-контейнерах, тк все программные зависимости, переменные среды, файлы конфигурации можно упаковать в контейнер и легко запустить на других машинах
- мобильное приложение c версиями для Android и iOS;

Я думаю здесь можно использовать любой вариант в зависимости от сложности и использования программных средств
- шина данных на базе Apache Kafka;

Лучше использовать Docker-контейнер, т.к. уже есть готовые образы, можно быстро развернуть сервис
- Elasticsearch-кластер для реализации логирования продуктивного веб-приложения — три ноды elasticsearch, два logstash и две ноды kibana;

Лучше использовать Docker-контейнер, т.к. уже есть готовые образы, можно быстро развернуть сервис, удобно масштабировать.
- мониторинг-стек на базе Prometheus и Grafana;

Лучше использовать Docker-контейнер, т.к. уже есть готовые образы, можно быстро развернуть сервис, удобно масштабировать.
- MongoDB как основное хранилище данных для Java-приложения;

Лучше использовать кластер из виртуальных или физических серверов для большей надежности.
- Gitlab-сервер для реализации CI/CD-процессов и приватный (закрытый) Docker Registry.

Здесь можно использовать комплексно Docker-контейнер и виртуальные машины


## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тегом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера.
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```.
- Добавьте ещё один файл в папку ```/data``` на хостовой машине.
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

## Решение

1.
```bash
ivan@ubuntupc:~$ sudo docker run -it --rm -d --name centos -v $(pwd)/data:/data centos:latest
Unable to find image 'centos:latest' locally
latest: Pulling from library/centos
a1d0c7532777: Pull complete
Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177
Status: Downloaded newer image for centos:latest
2429492fe8b5f6a8b5c31d657f2c0d64b863f9443eaea2b319ced76f1a7bb52b
```

2.
```bash
ivan@ubuntupc:~$ sudo docker run -it --rm -d --name debian -v $(pwd)/data:/data debian:latest
Unable to find image 'debian:latest' locally
latest: Pulling from library/debian
bd73737482dd: Pull complete
Digest: sha256:432f545c6ba13b79e2681f4cc4858788b0ab099fc1cca799cc0fae4687c69070
Status: Downloaded newer image for debian:latest
95f16147255d38de3401cee2b722582483aa35bad11b06b5bda3771398d329d4

ivan@ubuntupc:~$ sudo docker ps
CONTAINER ID   IMAGE           COMMAND       CREATED              STATUS              PORTS     NAMES
95f16147255d   debian:latest   "bash"        7 seconds ago        Up 6 seconds                  debian
2429492fe8b5   centos:latest   "/bin/bash"   About a minute ago   Up About a minute             centos
```

3.
```bash
ivan@ubuntupc:~$ sudo docker exec -it centos bash
[root@2429492fe8b5 /]# ls
bin   dev  home  lib64       media  opt   root  sbin  sys  usr
data  etc  lib   lost+found  mnt    proc  run   srv   tmp  var
[root@2429492fe8b5 /]# vi /data/test.txt
[root@2429492fe8b5 /]# exit
```

4.
```bash
ivan@ubuntupc:~$ sudo vi /home/ivan/data/test2.txt
```

5.
```bash
ivan@ubuntupc:~$ sudo docker exec -it debian bash
root@95f16147255d:/# ls -lah /data
total 16K
drwxr-xr-x 2 root root 4.0K Jun  3 14:44 .
drwxr-xr-x 1 root root 4.0K Jun  3 14:29 ..
-rw-r--r-- 1 root root    9 Jun  3 14:38 test.txt
-rw-r--r-- 1 root root    8 Jun  3 14:44 test2.txt
```

## Задача 4 (*)

Воспроизведите практическую часть лекции самостоятельно.

Соберите Docker-образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.


---

### Как cдавать задание

Выполненное домашнее задание пришлите ссылкой на .md-файл в вашем репозитории.

---

